# Learn more about services, parameters and containers at
# http://symfony.com/doc/current/book/service_container.html
parameters:
    password_encoder_cost: 14

services:
    form.error_extractor:
        class: AppBundle\Form\FlattenedFormErrorExtractor

    command_validator:
        class: AppBundle\Validation\Validator
        arguments: [@validator]

    password_encoder:
        class: Domain\User\Security\PasswordEncoder
        arguments: ["%password_encoder_cost%"]

    validator.unique.user_email:
        class: AppBundle\Validation\Constraints\UniqueFieldValidator
        arguments: [@user_repository]
        tags:
            - { name: validator.constraint_validator, alias: validator.unique.user_email }
